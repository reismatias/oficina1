<!-- Top: Chart -->
<section class="panel" style="flex: 1; min-height: 300px; display:flex;flex-direction:column;">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
    <div style="display:flex;align-items:center;gap:12px">
      <h3 style="margin:0">Métricas</h3>
      <select id="chartInterval" class="btn"
        style="padding:4px 8px;font-size:12px;background:rgba(255,255,255,0.1);border:none;color:white;cursor:pointer">
        <option value="realtime" style="background:#333;color:white">Tempo Real</option>
        <option value="1" style="background:#333;color:white">Média 1s</option>
        <option value="10" style="background:#333;color:white">Média 10s</option>
        <option value="30" style="background:#333;color:white">Média 30s</option>
        <option value="60" style="background:#333;color:white">Média 1 min</option>
      </select>
      <div style="display:flex;align-items:center;gap:4px;margin-left:8px">
        <label for="dbThreshold" style="font-size:12px;opacity:0.7">Limite:</label>
        <input type="number" id="dbThreshold" value="60" min="0" max="120"
          style="width:50px;padding:4px;font-size:12px;background:rgba(255,255,255,0.1);border:none;color:white;border-radius:4px">
      </div>
    </div>
    <div style="font-size:13px;opacity:.8">Última atualização: <span id="lastUpdate">—</span></div>
  </div>
  <div id="chartArea"
    style="flex:1;display:flex;align-items:center;justify-content:center;position:relative;min-width:0;overflow:hidden;">
    <canvas id="myChart" style="width:100%;height:100%"></canvas>
  </div>
</section>

<!-- Bottom: Logs and Devices -->
<div style="display:grid; grid-template-columns: auto minmax(300px, 1fr); gap:0; min-height:300px;">
  <!-- Bottom Right: Devices -->
  <section class="panel devices" style="display:flex;flex-direction:column;flex:1;min-width:300px;margin-right:16px;">
    <h3 style="margin:0 0 10px 0">Devices</h3>
    <div id="deviceList" style="overflow:auto;flex:1;padding-right:6px"></div>
    <div style="margin-top:8px;display:flex;gap:8px">
      <button id="refreshDevices" class="btn">Atualizar</button>
    </div>
  </section>

  <!-- Bottom Left: Logs -->
  <section class="panel" style="display:flex;flex-direction:column;">
    <h3 style="margin:0 0 10px 0">Log de Eventos</h3>
    <div id="eventLogs" style="overflow:auto;flex:1;font-family:monospace;font-size:13px;opacity:0.9;">
      <div style="opacity:0.5;font-style:italic">Nenhum evento registrado.</div>
    </div>
  </section>
</div>